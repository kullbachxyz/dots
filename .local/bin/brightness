#!/bin/bash

# Check if an argument is provided
if [ $# -ne 1 ]; then
  echo "Usage: $0 up|down"
  exit 1
fi

# Define the brightness change percentage
BRIGHTNESS_CHANGE=10%

# Clear previous notifications using dunstctl
dunstctl close

# Perform the action based on the argument
if [ "$1" == "up" ]; then
  # Increase brightness by 5%
  brightnessctl set +$BRIGHTNESS_CHANGE &>/dev/null
elif [ "$1" == "down" ]; then
  # Decrease brightness by 5%
  brightnessctl set $BRIGHTNESS_CHANGE- &>/dev/null
else
  echo "Invalid argument. Use 'up' or 'down'."
  exit 1
fi

# Get the current brightness value
CURRENT_BRIGHTNESS=$(brightnessctl | awk -F'[()]' '{print $2}' | tr -d '\n' | awk '{gsub(/^[ \t]+|[ \t]+$/, ""); print $1}')

# Display the current brightness as a notification
# notify-send "Brightness" "$CURRENT_BRIGHTNESS"
dunstify --hints=int:value:"$CURRENT_BRIGHTNESS" "Brightness: $(printf "%.0f" "$CURRENT_BRIGHTNESS")%"
